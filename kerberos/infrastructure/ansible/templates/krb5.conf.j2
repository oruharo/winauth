# Kerberos configuration file with RC4 compatibility for Windows clients
[libdefaults]
# CRITICAL: Enable weak crypto support for RC4 in Java 17+
allow_weak_crypto = true
default_realm = DOMAIN1.LAB
dns_lookup_realm = false
dns_lookup_kdc = false
ticket_lifetime = 24h
renew_lifetime = 7d
forwardable = true
# Include RC4 for Windows client compatibility
default_tgs_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 rc4-hmac
default_tkt_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 rc4-hmac
permitted_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 rc4-hmac

[realms]
DOMAIN1.LAB = {
  kdc = {{ domain1_kdc | default('10.0.10.10') }}
  admin_server = {{ domain1_kdc | default('10.0.10.10') }}
}
DOMAIN2.LAB = {
  kdc = {{ domain2_kdc | default('10.0.20.10') }}
  admin_server = {{ domain2_kdc | default('10.0.20.10') }}
}

[domain_realm]
.domain1.lab = DOMAIN1.LAB
domain1.lab = DOMAIN1.LAB
.domain2.lab = DOMAIN2.LAB
domain2.lab = DOMAIN2.LAB